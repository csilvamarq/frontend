<div class="newSongContainer"><h2 mat-dialog-title>Agregar Nueva Canción</h2>
    <mat-dialog-content>
        <form [formGroup]="cancionForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
          <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" formControlName="nombre" class="form-control">
            <div *ngIf="cancionForm.get('nombre')?.invalid && (cancionForm.get('nombre')?.dirty || cancionForm.get('nombre')?.touched)" class="error">
              {{ getErrorMessage('nombre') }}
            </div>
          </div>
          <div class="form-group">
            <label for="autor">Autor:</label>
            <input type="text" id="autor" formControlName="autor" class="form-control">
            <div *ngIf="cancionForm.get('autor')?.invalid && (cancionForm.get('autor')?.dirty || cancionForm.get('autor')?.touched)" class="error">
              {{ getErrorMessage('autor') }}
            </div>
          </div>
          <div class="form-group">
            <label for="duracion">Duración (en segundos):</label>
            <input type="number" id="duracion" formControlName="duracion" class="form-control" readonly>
            <div *ngIf="cancionForm.get('duracion')?.invalid && (cancionForm.get('duracion')?.dirty || cancionForm.get('duracion')?.touched)" class="error">
              {{ getErrorMessage('duracion') }}
            </div>
          </div>
          <div class="form-group">
            <label for="fecha_lanzamiento">Fecha de Lanzamiento:</label>
            <input type="date" id="fecha_lanzamiento" formControlName="fecha_lanzamiento" class="form-control">
            <div *ngIf="cancionForm.get('fecha_lanzamiento')?.invalid && (cancionForm.get('fecha_lanzamiento')?.dirty || cancionForm.get('fecha_lanzamiento')?.touched)" class="error">
              {{ getErrorMessage('fecha_lanzamiento') }}
            </div>
          </div>
          <div class="form-group">
            <label for="genero">Género:</label>
            <input type="text" id="genero" formControlName="genero" class="form-control">
            <div *ngIf="cancionForm.get('genero')?.invalid && (cancionForm.get('genero')?.dirty || cancionForm.get('genero')?.touched)" class="error">
              {{ getErrorMessage('genero') }}
            </div>
          </div>
          <div class="form-group">
            <label for="portada">Portada:</label>
            <input type="file" id="portada" (change)="onImageSelected($event)" class="form-control">
            <div *ngIf="cancionForm.get('portada')?.invalid && (cancionForm.get('portada')?.dirty || cancionForm.get('portada')?.touched)" class="error">
              {{ getErrorMessage('portada') }}
            </div>
          </div>
          <div class="form-group">
            <label for="archivo_mp3">Archivo MP3:</label>
            <input type="file" id="archivo_mp3" (change)="onFileSelected($event)" class="form-control">
            <div *ngIf="cancionForm.get('archivo_mp3')?.invalid && (cancionForm.get('archivo_mp3')?.dirty || cancionForm.get('archivo_mp3')?.touched)" class="error">
              {{ getErrorMessage('archivo_mp3') }}
            </div>
          </div>
          <div *ngIf="this.data.song; else newSong">
            <button type="submit" class="btn btn-primary" [disabled]="!cancionForm.valid">Guardar Canción</button>
          </div>
          <ng-template #newSong ><button type="submit" class="btn btn-primary" [disabled]="!cancionForm.valid">Agregar Canción</button></ng-template>
        </form>
      </mat-dialog-content>
      <mat-dialog-actions>
        <button mat-button (click)="onCancel()">Cancelar</button>
      </mat-dialog-actions>
</div>